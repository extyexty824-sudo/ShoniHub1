-- Shoni Hub | ESP + TELEPORT + FPS + SPEED BOOST 0â†’28 (sans mort)
-- =========================
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local StarterGui = game:GetService("StarterGui")
local player = Players.LocalPlayer

-- === TES KEYS ICI ===
local ValidKeys = {"Exta"}  -- Ajoute d'autres keys si tu veux : {"Exta", "key2", "key3"}

local function createKeyGui()
    local KeyGui = Instance.new("ScreenGui")
    KeyGui.Name = "ShoniKeySystem"
    KeyGui.Parent = player:WaitForChild("PlayerGui")
    KeyGui.ResetOnSpawn = false

    local KeyFrame = Instance.new("Frame", KeyGui)
    KeyFrame.Size = UDim2.new(0, 340, 0, 240)
    KeyFrame.Position = UDim2.new(0.5, -170, 0.5, -120)
    KeyFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    KeyFrame.BackgroundTransparency = 0.5  -- Noir ultra transparent
    KeyFrame.BorderSizePixel = 0
    Instance.new("UICorner", KeyFrame).CornerRadius = UDim.new(0, 20)

    local KeyStroke = Instance.new("UIStroke", KeyFrame)
    KeyStroke.Color = Color3.fromRGB(255, 0, 0)  -- Contour rouge
    KeyStroke.Thickness = 4

    local KeyTitle = Instance.new("TextLabel", KeyFrame)
    KeyTitle.Size = UDim2.new(1, 0, 0, 60)
    KeyTitle.Position = UDim2.new(0, 0, 0, 10)
    KeyTitle.Text = "Shoni Hub"
    KeyTitle.TextColor3 = Color3.fromRGB(255, 0, 0)
    KeyTitle.Font = Enum.Font.GothamBlack
    KeyTitle.TextSize = 36
    KeyTitle.BackgroundTransparency = 1

    local EnterKeyLabel = Instance.new("TextLabel", KeyFrame)
    EnterKeyLabel.Size = UDim2.new(1, -40, 0, 40)
    EnterKeyLabel.Position = UDim2.new(0, 20, 0, 70)
    EnterKeyLabel.Text = "Entre la clÃ© ici"
    EnterKeyLabel.TextColor3 = Color3.new(1, 1, 1)
    EnterKeyLabel.Font = Enum.Font.GothamBold
    EnterKeyLabel.TextSize = 24
    EnterKeyLabel.BackgroundTransparency = 1

    local KeyBox = Instance.new("TextBox", KeyFrame)
    KeyBox.Size = UDim2.new(0, 300, 0, 50)
    KeyBox.Position = UDim2.new(0.5, -150, 0, 110)
    KeyBox.Text = ""
    KeyBox.TextColor3 = Color3.fromRGB(0, 0, 0)
    KeyBox.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    KeyBox.Font = Enum.Font.GothamBold
    KeyBox.TextSize = 20
    KeyBox.PlaceholderText = "Entre ta clÃ©..."
    KeyBox.PlaceholderColor3 = Color3.fromRGB(150, 150, 150)
    Instance.new("UICorner", KeyBox).CornerRadius = UDim.new(0, 12)

    local CheckButton = Instance.new("TextButton", KeyFrame)
    CheckButton.Size = UDim2.new(0, 220, 0, 50)
    CheckButton.Position = UDim2.new(0.5, -110, 0, 170)
    CheckButton.Text = "Valider"
    CheckButton.TextColor3 = Color3.fromRGB(0, 0, 0)
    CheckButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
    CheckButton.Font = Enum.Font.GothamBold
    CheckButton.TextSize = 24
    Instance.new("UICorner", CheckButton).CornerRadius = UDim.new(0, 12)

    local StatusLabel = Instance.new("TextLabel", KeyFrame)
    StatusLabel.Size = UDim2.new(1, 0, 0, 30)
    StatusLabel.Position = UDim2.new(0, 0, 1, -40)
    StatusLabel.Text = ""
    StatusLabel.TextColor3 = Color3.new(1, 1, 1)
    StatusLabel.BackgroundTransparency = 1
    StatusLabel.Font = Enum.Font.GothamBold
    StatusLabel.TextSize = 18

    CheckButton.MouseButton1Click:Connect(function()
        local entered = KeyBox.Text
        local valid = table.find(ValidKeys, entered) ~= nil
        if valid then
            StatusLabel.Text = "Key valide ! Bienvenue boss ðŸ”¥"
            StatusLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
            task.wait(1.5)
            KeyGui:Destroy()
            task.wait(0.3)
            loadShoniHub()
        else
            StatusLabel.Text = "Key invalide ðŸ˜­"
            StatusLabel.TextColor3 = Color3.fromRGB(255, 0, 0)
            KeyBox.Text = ""
        end
    end)

    KeyBox.FocusLost:Connect(function(enterPressed)
        if enterPressed then CheckButton.MouseButton1Click:Fire() end
    end)
end

function loadShoniHub()
    -- === WHITELIST (mets ton pseudo Roblox ici en minuscules) ===
    local Whitelist = {"exta1516", ""}  -- Change "exta1516" par ton pseudo exact si diffÃ©rent

    local function isWhitelisted(name)
        if not name then return false end
        return table.find(Whitelist, string.lower(name)) ~= nil
    end

    if not isWhitelisted(player.Name) and not isWhitelisted(player.DisplayName) then
        player:Kick("Tu n'es pas dans la whitelist du Shoni Hub.")
        return
    end

    -- Notification pour confirmer le chargement
    StarterGui:SetCore("SendNotification", {
        Title = "Shoni Hub";
        Text = "Hub chargÃ© ! Clique sur le bouton rouge SH SHOP en haut Ã  droite.";
        Duration = 10;
    })

    local backpack = player:WaitForChild("Backpack")
    local char = player.Character or player.CharacterAdded:Wait()
    local humanoid = char:WaitForChild("Humanoid")
    local hrp = char:WaitForChild("HumanoidRootPart")

    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "ShoniHub"
    ScreenGui.ResetOnSpawn = false
    ScreenGui.Parent = player.PlayerGui

    -- Bouton rond SH SHOP (haut droite)
    local ToggleButton = Instance.new("TextButton")
    ToggleButton.Size = UDim2.new(0, 100, 0, 100)
    ToggleButton.Position = UDim2.new(1, -120, 0, 20)
    ToggleButton.BackgroundColor3 = Color3.fromRGB(180, 0, 0)
    ToggleButton.Text = "SH\nSHOP"
    ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    ToggleButton.Font = Enum.Font.GothamBlack
    ToggleButton.TextSize = 26
    ToggleButton.TextYAlignment = Enum.TextYAlignment.Center
    ToggleButton.BorderSizePixel = 0
    ToggleButton.BackgroundTransparency = 0
    Instance.new("UICorner", ToggleButton).CornerRadius = UDim.new(1, 0)
    local stroke = Instance.new("UIStroke", ToggleButton)
    stroke.Color = Color3.fromRGB(255, 0, 0)
    stroke.Thickness = 4
    stroke.Transparency = 0.1
    ToggleButton.Parent = ScreenGui

    -- Menu principal (fond ENCORE plus foncÃ©)
    local Frame = Instance.new("Frame", ScreenGui)
    Frame.Size = UDim2.new(0, 220, 0, 350)
    Frame.Position = UDim2.new(0.5, -110, 0.5, -175)
    Frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)  -- Fond noir
    Frame.BackgroundTransparency = 0.3  -- <<< ICI : encore plus foncÃ© (avant 0.5, originellement 0.85)
    Frame.Active = true
    Frame.Draggable = true
    Frame.BorderSizePixel = 0
    Frame.Visible = false
    Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 15)
    local Stroke = Instance.new("UIStroke", Frame)
    Stroke.Color = Color3.fromRGB(255, 0, 0)
    Stroke.Thickness = 2

    local Title = Instance.new("TextLabel", Frame)
    Title.Size = UDim2.new(1, -20, 0, 40)
    Title.Position = UDim2.new(0, 10, 0, 10)
    Title.Text = "Shoni Hub"
    Title.TextColor3 = Color3.new(1,1,1)
    Title.Font = Enum.Font.GothamBold
    Title.TextSize = 22
    Title.BackgroundTransparency = 1

    -- Boutons du menu
    local Teleport1 = Instance.new("TextButton", Frame)
    Teleport1.Size = UDim2.new(0, 180, 0, 50)
    Teleport1.Position = UDim2.new(0, 20, 0, 60)
    Teleport1.Text = "ðŸ“¡ Teleport 1"
    Teleport1.TextColor3 = Color3.fromRGB(0,0,0)
    Teleport1.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
    Teleport1.Font = Enum.Font.GothamBold
    Teleport1.TextSize = 18
    Instance.new("UICorner", Teleport1).CornerRadius = UDim.new(0, 15)

    local Teleport2 = Instance.new("TextButton", Frame)
    Teleport2.Size = UDim2.new(0, 180, 0, 50)
    Teleport2.Position = UDim2.new(0, 20, 0, 120)
    Teleport2.Text = "ðŸ“¡ Teleport 2"
    Teleport2.TextColor3 = Color3.fromRGB(0,0,0)
    Teleport2.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
    Teleport2.Font = Enum.Font.GothamBold
    Teleport2.TextSize = 18
    Instance.new("UICorner", Teleport2).CornerRadius = UDim.new(0, 15)

    local ESPToggle = Instance.new("TextButton", Frame)
    ESPToggle.Size = UDim2.new(0, 180, 0, 50)
    ESPToggle.Position = UDim2.new(0, 20, 0, 180)
    ESPToggle.Text = "ðŸ‘ï¸ ESP : OFF"
    ESPToggle.TextColor3 = Color3.fromRGB(0,0,0)
    ESPToggle.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
    ESPToggle.Font = Enum.Font.GothamBold
    ESPToggle.TextSize = 20
    Instance.new("UICorner", ESPToggle).CornerRadius = UDim.new(0, 15)

    local FPSToggle = Instance.new("TextButton", Frame)
    FPSToggle.Size = UDim2.new(0, 180, 0, 50)
    FPSToggle.Position = UDim2.new(0, 20, 0, 240)
    FPSToggle.Text = "ðŸ“Š FPS : OFF"
    FPSToggle.TextColor3 = Color3.fromRGB(0,0,0)
    FPSToggle.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
    FPSToggle.Font = Enum.Font.GothamBold
    FPSToggle.TextSize = 20
    Instance.new("UICorner", FPSToggle).CornerRadius = UDim.new(0, 15)

    local SpeedBoostToggle = Instance.new("TextButton", Frame)
    SpeedBoostToggle.Size = UDim2.new(0, 180, 0, 50)
    SpeedBoostToggle.Position = UDim2.new(0, 20, 0, 295)
    SpeedBoostToggle.Text = "âš¡ Speed Boost : OFF"
    SpeedBoostToggle.TextColor3 = Color3.fromRGB(0,0,0)
    SpeedBoostToggle.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
    SpeedBoostToggle.Font = Enum.Font.GothamBold
    SpeedBoostToggle.TextSize = 20
    Instance.new("UICorner", SpeedBoostToggle).CornerRadius = UDim.new(0, 15)

    -- FPS COUNTER
    local fpsFrame = Instance.new("Frame")
    fpsFrame.Size = UDim2.new(0, 120, 0, 40)
    fpsFrame.Position = UDim2.new(0, 10, 0, 10)
    fpsFrame.BackgroundTransparency = 0.3
    fpsFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    Instance.new("UICorner", fpsFrame).CornerRadius = UDim.new(0, 8)
    fpsFrame.Parent = ScreenGui
    fpsFrame.Visible = false

    local fpsLabel = Instance.new("TextLabel", fpsFrame)
    fpsLabel.Size = UDim2.new(1, 0, 1, 0)
    fpsLabel.BackgroundTransparency = 1
    fpsLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    fpsLabel.TextStrokeTransparency = 0.5
    fpsLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
    fpsLabel.Font = Enum.Font.GothamBold
    fpsLabel.TextSize = 18
    fpsLabel.Text = "FPS: 0"

    local fpsConnection = nil
    local function toggleFPSCounter(enabled)
        fpsFrame.Visible = enabled
        if enabled and not fpsConnection then
            local lastTime = tick()
            local frameCount = 0
            fpsConnection = RunService.RenderStepped:Connect(function()
                frameCount = frameCount + 1
                if tick() - lastTime >= 1 then
                    local fps = math.floor(frameCount / (tick() - lastTime))
                    fpsLabel.Text = "FPS: " .. fps
                    fpsLabel.TextColor3 = fps > 120 and Color3.fromRGB(0, 255, 0) or (fps > 60 and Color3.fromRGB(255, 215, 0) or Color3.fromRGB(255, 0, 0))
                    frameCount = 0
                    lastTime = tick()
                end
            end)
        elseif not enabled and fpsConnection then
            fpsConnection:Disconnect()
            fpsConnection = nil
        end
    end

    local fpsEnabled = false
    FPSToggle.MouseButton1Click:Connect(function()
        fpsEnabled = not fpsEnabled
        FPSToggle.Text = fpsEnabled and "ðŸ“Š FPS : ON" or "ðŸ“Š FPS : OFF"
        FPSToggle.BackgroundColor3 = fpsEnabled and Color3.fromRGB(80, 255, 80) or Color3.fromRGB(255, 80, 80)
        toggleFPSCounter(fpsEnabled)
    end)

    -- ESP
    local espEnabled = false
    local boxEsps = {}
    local nameEsps = {}

    local function createBoxESP(plr)
        if plr == player or boxEsps[plr] then return end
        local character = plr.Character
        if not character or not character:FindFirstChild("HumanoidRootPart") then return end
        local box = Instance.new("BoxHandleAdornment")
        box.Name = "ShoniBoxESP"
        box.Adornee = character
        box.Size = Vector3.new(4, 6, 4)
        box.Color3 = Color3.fromRGB(255, 0, 0)
        box.Transparency = 0.3
        box.AlwaysOnTop = true
        box.ZIndex = 10
        box.Parent = character
        boxEsps[plr] = box
    end

    local function createNameESP(plr)
        if plr == player or nameEsps[plr] then return end
        local billboard = Instance.new("BillboardGui")
        billboard.AlwaysOnTop = true
        billboard.Size = UDim2.new(0, 200, 0, 80)
        billboard.StudsOffset = Vector3.new(0, 4, 0)
        billboard.Enabled = false
        billboard.Parent = ScreenGui
        local nameLabel = Instance.new("TextLabel", billboard)
        nameLabel.Size = UDim2.new(1, 0, 0.5, 0)
        nameLabel.BackgroundTransparency = 1
        nameLabel.Text = plr.Name
        nameLabel.TextColor3 = Color3.new(1, 1, 1)
        nameLabel.TextStrokeTransparency = 0
        nameLabel.TextStrokeColor3 = Color3.new(0, 0, 0)
        nameLabel.Font = Enum.Font.GothamBlack
        nameLabel.TextSize = 24
        nameLabel.TextYAlignment = Enum.TextYAlignment.Bottom
        local distLabel = Instance.new("TextLabel", billboard)
        distLabel.Size = UDim2.new(1, 0, 0.5, 0)
        distLabel.Position = UDim2.new(0, 0, 0.5, 0)
        distLabel.BackgroundTransparency = 1
        distLabel.TextColor3 = Color3.new(1, 1, 1)
        distLabel.TextStrokeTransparency = 0.5
        distLabel.TextStrokeColor3 = Color3.new(0, 0, 0)
        distLabel.Font = Enum.Font.GothamBold
        distLabel.TextSize = 20
        nameEsps[plr] = {billboard = billboard, distLabel = distLabel}
    end

    local function removeESP(plr)
        if boxEsps[plr] then boxEsps[plr]:Destroy() boxEsps[plr] = nil end
        if nameEsps[plr] then nameEsps[plr].billboard:Destroy() nameEsps[plr] = nil end
    end

    local function updateNameESP()
        if not espEnabled or not hrp then return end
        local hrpPos = hrp.Position
        for plr, data in pairs(nameEsps) do
            local char = plr.Character
            if char and char:FindFirstChild("Head") and char:FindFirstChild("HumanoidRootPart") then
                local root = char.HumanoidRootPart
                local dist = (hrpPos - root.Position).Magnitude
                data.billboard.Adornee = char.Head
                data.billboard.Enabled = true
                data.distLabel.Text = math.floor(dist) .. " studs"
            else
                data.billboard.Enabled = false
            end
        end
    end

    for _, plr in Players:GetPlayers() do
        createNameESP(plr)
        createBoxESP(plr)
    end

    Players.PlayerAdded:Connect(function(plr)
        createNameESP(plr)
        plr.CharacterAdded:Connect(function() createBoxESP(plr) end)
    end)

    Players.PlayerRemoving:Connect(removeESP)

    ESPToggle.MouseButton1Click:Connect(function()
        espEnabled = not espEnabled
        ESPToggle.Text = espEnabled and "ðŸ‘ï¸ ESP : ON" or "ðŸ‘ï¸ ESP : OFF"
        ESPToggle.BackgroundColor3 = espEnabled and Color3.fromRGB(80, 255, 80) or Color3.fromRGB(255, 80, 80)
        if espEnabled then
            for _, plr in Players:GetPlayers() do
                if plr ~= player then createBoxESP(plr) end
            end
        else
            for _, box in pairs(boxEsps) do box:Destroy() end
            boxEsps = {}
            for _, data in pairs(nameEsps) do data.billboard.Enabled = false end
        end
    end)

    RunService.Heartbeat:Connect(updateNameESP)

    -- SPEED BOOST
    local speedBoostActive = false
    local maxSpeed = 28
    local accelerationTime = 1.5
    local speedConnection = nil

    SpeedBoostToggle.MouseButton1Click:Connect(function()
        speedBoostActive = not speedBoostActive
        SpeedBoostToggle.Text = speedBoostActive and "âš¡ Speed Boost : ON" or "âš¡ Speed Boost : OFF"
        SpeedBoostToggle.BackgroundColor3 = speedBoostActive and Color3.fromRGB(80, 255, 80) or Color3.fromRGB(255, 80, 80)
        if speedBoostActive then
            local startTime = tick()
            if speedConnection then speedConnection:Disconnect() end
            speedConnection = RunService.Heartbeat:Connect(function()
                local elapsed = tick() - startTime
                if elapsed >= accelerationTime then
                    humanoid.WalkSpeed = maxSpeed
                else
                    local progress = elapsed / accelerationTime
                    humanoid.WalkSpeed = 16 + (maxSpeed - 16) * progress
                end
            end)
        else
            if speedConnection then
                speedConnection:Disconnect()
                speedConnection = nil
            end
            humanoid.WalkSpeed = 16
        end
    end)

    -- TELEPORTS
    local spots1 = {
        CFrame.new(-402.18, -5.34, 131.83) * CFrame.Angles(0, math.rad(-20.08), 0),
        CFrame.new(-416.66, -6.34, -2.05) * CFrame.Angles(0, math.rad(-62.89), 0),
        CFrame.new(-329.37, -4.68, 18.12) * CFrame.Angles(0, math.rad(-30.53), 0),
    }

    local spots2 = {
        CFrame.new(-402.18, -5.34, 131.83) * CFrame.Angles(0, math.rad(-20.08), 0),
        CFrame.new(-416.66, -6.34, -2.05) * CFrame.Angles(0, math.rad(-62.89), 0),
        CFrame.new(-342.5, -7, 95) * CFrame.Angles(0, math.rad(-30.53), 0),
    }

    local REQUIRED_TOOL = "Flying Carpet"

    local function equipTool()
        local tool = char:FindFirstChild(REQUIRED_TOOL) or backpack:FindFirstChild(REQUIRED_TOOL)
        if not tool then return false end
        humanoid:EquipTool(tool)
        task.wait()
        return char:FindFirstChildOfClass("Tool") == tool
    end

    local function executeTeleport(spotsTable)
        if not equipTool() then
            StarterGui:SetCore("SendNotification", {Title = "Erreur"; Text = "Ã‰quipe le Flying Carpet d'abord !"; Duration = 5})
            return
        end
        for _, spot in spotsTable do
            hrp.CFrame = spot
            task.wait(0.1)
        end
    end

    Teleport1.MouseButton1Click:Connect(function() executeTeleport(spots1) end)
    Teleport2.MouseButton1Click:Connect(function() executeTeleport(spots2) end)

    -- OUVERTURE / FERMETURE DU MENU
    local menuVisible = false
    ToggleButton.MouseButton1Click:Connect(function()
        menuVisible = not menuVisible
        Frame.Visible = menuVisible
        if menuVisible then
            Frame:TweenSizeAndPosition(UDim2.new(0, 220, 0, 350), UDim2.new(0.5, -110, 0.5, -175), Enum.EasingDirection.Out, Enum.EasingStyle.Quad, 0.3, true)
        else
            Frame:TweenSize(UDim2.new(0, 0, 0, 0), Enum.EasingDirection.In, Enum.EasingStyle.Quad, 0.3, true)
        end
    end)

    -- Respawn
    player.CharacterAdded:Connect(function(newChar)
        char = newChar
        humanoid = newChar:WaitForChild("Humanoid")
        hrp = newChar:WaitForChild("HumanoidRootPart")
    end)
end

createKeyGui()

